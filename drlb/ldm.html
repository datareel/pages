<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="DataReel Software Development">
    <meta name="author" content="DataReel Software Development">
    <meta name="title" content="DataReel OpenSource" />
    <meta name="creator" content="DataReel Software Development" />
    <meta name="publisher" content="DataReel Software Development" />
    <meta name="contributor" content="DataReel Software Development" />
    <meta name="date.created" scheme="ISO8601" content="2016-08-20" />
    <meta name="date.reviewed" scheme="ISO8601" content="2016-08-20" />
    <meta name="language" scheme="DCTERMS.RFC1766" content="EN-US" />
    <meta name="keywords" content="Database, Linux, Applications, load
				   balancer, cluster manager, DRLB,
				   DRCM, LDM, LDM protocol, LDM rpc,
				   Communications, Sockets, Threads, C++,
				   Programming, Windows, open source,
				   multi-threaded, cross-platform,
				   commercial, individual, academic, 
				   modular" />
    <meta name="rights" content="http://datareel.com" />
    <meta name="rating" content="General" />
    <meta name="Distribution" content="Global" />
    <meta name="Revisit-after" content="1 week">
    <meta name="robots" content="index,follow" />
    <link rel="icon" href="../images/favicon.ico">
    <title>DRLB LDM service</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <link href="../css/starter-template.css" rel="stylesheet">
    <script src="../js/ie-emulation-modes-warning.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements
    and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed"
          data-toggle="collapse" data-target="#navbar"
          aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://datareel.com/">DataReel Open Source</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="../clib/index.html">C/C++ Library</a></li>
            <li><a href="../drcm/index.html">Cluster Manager</a></li>
            <li><a href="index.html">Load Balancer</a></li>
            <li><a href="ssl.html">DRLB SSL Bridge</a></li>
            <li class="active"><a href="ldm.html">DRLB LDM service</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div>
<!-- My Content Starts Below -->

<!-- Start company logo -->
<center><img src="../images/drlogo1.jpg" /></center>
<!-- End company logo --><!-- Start Menu -->
<hr color="#000000" noshade="noshade" size="1" /><!-- Begin Title Bar --
				-- -->
<table border="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td bgcolor="A0CCFF"><font face="Arial,Helvetica,Sans-serif"><b>&nbsp;Contents</b></font></td>
      </tr>
    </tbody>
</table>
<br />
<!-- End Title Bar -->

<p>
<a href="#Overview">Overview</a><br />
<a href="#RPMInstall">RPM Install</a><br />
<a href="#Building">Building and Installing</a><br />
<a href="#Remainingworkonthisproject">Remaining work on this project</a><br />
<a href="#SupportandBugTracking">Support and Bug Tracking</a><br />

<!-- Begin Title Bar -->
<table border="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td bgcolor="A0CCFF"><font face="Arial,Helvetica,Sans-serif"><b>&nbsp;<a name="Overview">Overview</a></b></font></td>
    </tr>
  </tbody>
</table>
<!-- End Title Bar -->
<br />
<p>
The DRLB LDM service is a front-end load balancer for the Unidata LDM
(Local Data Manager) protocol. 
<br /><br />
The DRLB LDM service uses your existing
ldmd.conf (plus include files) to allow or deny incoming client
requests to LDM product feeds. The DRLB LDM server listening on port
388 routes LDM requests and data to any number of back-end
clients. Each back-end client runs an LDM server. The ldmd.conf ALLOW
and ACCEPT rules are applied by the front-end load balancer. If the
incoming client request does not have matching ALLOW or ACCEPT rule
the front-end LB drops the client connection. If the client request
for a feed type does not match any ALLOW rules, with optional OK and
NOT patterns, the front-end LB drops the client connection. If a
client sends a product and the incoming product does not match any
ACCEPT rules the client connection is dropped. Client connections
meeting the ALLOW and/or ACCEPT criteria are forward on to a back-end
LDM server in accordance with the LB scheme. By using the front-end LB
to process initial LDM client requests we conserve CPU, memory, and
network resources on all back-end LDM servers. This methodology also
allows you to run the latest version of LDM on back-end clients
without having to delay upgrades due to clients running old versions
of LDM.
<br /><br />
DRLB source code is distributed as an open source project under
the GNU general public license and can used by freely by commercial,
Government, and academic institutions.
</p>
<p class="pull-left"><a href="#">Back to top</a></p>

<!-- Begin Title Bar -->
<table border="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td bgcolor="A0CCFF"><font face="Arial,Helvetica,Sans-serif"><b>&nbsp;<a name="RPMInstall">RPM Install</a></b></font></td>
    </tr>
  </tbody>
</table>
<!-- End Title Bar -->
<br />
<p>
Latest pre-built RPMs are available for download:
<br/><br />
RHEL7/CENTOS7:<br />
<a href="https://github.com/datareel/datareel/releases/download/5.03/drlb_ldm_server-1.59-1.el7.x86_64.x86_64.rpm">
https://github.com/datareel/datareel/releases/download/5.03/drlb_ldm_server-1.59-1.el7.x86_64.x86_64.rpm
</a>
<br/><br />
RHEL6/CENTOS6:<br />
<a href="https://github.com/datareel/datareel/releases/download/5.03/drlb_ldm_server-1.59-1.el6.x86_64.x86_64.rpm">
https://github.com/datareel/datareel/releases/download/5.03/drlb_ldm_server-1.59-1.el6.x86_64.x86_64.rpm
</a>
<br/><br />
Follow the instructions below to build an RPM from latest source code for distribution:
<pre>
$ cd $HOME; mkdir -pv git; cd $HOME/git
$ git clone https://github.com/datareel/datareel
$ cd ${HOME}/git/datareel/load_balancer/rpm_builder
</pre>
RHEL7/CENTOS7:
<pre>
$ ./make_ldm_rpm_package.sh rhel7
$ sudo su root -c "yum -y install ${HOME}/rpmbuild/RPMS/x86_64/drlb_ldm_server-1.59-1.el7.x86_64.x86_64.rpm"
</pre>
RHEL6/CENTOS6:
<pre>
$ ./make_ldm_rpm_package.sh rhel6
$ sudo su root -c "yum -y install ${HOME}/rpmbuild/RPMS/x86_64/drlb_ldm_server-1.59-1.el6.x86_64.x86_64.rpm"
</pre>
Useful RPM command to verify package contents:
<br /><br />
List package: rpm -qf /usr/sbin/drlb_ldm_server<br />
List files: rpm -ql drlb_ldm_server<br />
List configs: rpm -qc drlb_ldm_server<br />
List docs: rpm -qd drlb_ldm_server
<br /><br />
To remove package:
<pre>
$ sudo su root -c "yum -y remove drlb_ldm_server"
</pre>
</p>
<p class="pull-left"><a href="#">Back to top</a></p>

<!-- Begin Title Bar -->
<table border="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td bgcolor="A0CCFF"><font face="Arial,Helvetica,Sans-serif"><b>&nbsp;<a name="Building">Building
      and Installing</a></b></font></td>
    </tr>
  </tbody>
</table>
<!-- End Title Bar -->
<br />
<p>
Follow the instructions below to build and install the DRLB LDM
server from latest source code: 
<pre>
$ cd $HOME
$ mkdir -pv git
$ cd $HOME/git
$ git clone https://github.com/datareel/datareel
$ source $HOME/git/datareel/env/gnu_env.sh
$ cd $HOME/git/datareel/load_balancer/drlb_ldm
$ make
$ sudo su root -c 'make install_root'
</pre>
The DRLB LDM service must have access to your LDM configuration, the
default location is: 
<br /><br />
/usr/local/ldm/etc/ldmd.conf
<br /><br />
NOTE: On the front-end LDM you will not be running the LDM server. If
you want to store your ldmd.conf (plus any include files) in another
local you can modify the LB configuration to point to another
location. 
<br /><br />
The default LB configuration file for LDM clusters is:
<br /><br />
/etc/drlb/ldm_cluster.cfg
<br /><br />
In the LB configuration file, refer to the following section for all
settings specific to DRLB LDM: 
<pre>
[LDMCONFIG]
ldm_etc_dir = /usr/local/ldm/etc
ldmd_conf_file = ldmd.conf
resolve_ldm_hostnames = 1
</pre>
For all other DRLB setting please refer to the DRLB README file:
<br /><br />
# more /usr/share/doc/drlb_ldm/README.txt 
<br /><br />
or online: 
<br /><br />
http://datareel.com/drlb/
<br /><br />
The default LB scheme used with LDM is assigned. The default
assignment rules file is: 
<br /><br />
/etc/drlb/ldm_cluster_rules.cfg
<br /><br />
The assignment rules allow you to route LDM requests to specific
back-end servers. This is done to isolate clients making excessive
requests or manage clients with unique requirements. By default if the
assigned back-end LDM server is down, the client request will be
forward to the next available back-end LDM server. 
<br /><br />
After setting up your LB and LDM configuration files, start the
service:
<br /><br />
RHEL 7/CENTOS 7:
<pre>
# systemctl start drlb_ldm_server
# systemctl status drlb_ldm_server
</pre>
RHEL 6/CENTOS 6:
<pre>
# service drlb_ldm_server start
# service drlb_ldm_server status
</pre>
To watch the log file:
<pre>
# tail -f /var/log/drlb/ldm_cluster_lb.log
</pre>
To watch LB stats:
<pre>
# tail -n 25 -f /var/log/drlb/ldm_cluster_lb_stats.log
</pre>
To make the LB service persistent: 
<br /><br />
RHEL 7/CENTOS 7:
<pre>
# systemctl enable drlb_ldm_server
</pre>
RHEL 6/CENTOS 6:
<pre>
# chkconfig drlb_ldm_server on
</pre>
</p>
<p class="pull-left"><a href="#">Back to top</a></p>

<!-- Begin Title Bar -->
<table border="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td bgcolor="A0CCFF"><font face="Arial,Helvetica,Sans-serif"><b>&nbsp;<a name="Remainingworkonthisproject">Remaining work on this project</a></b></font></td>
    </tr>
  </tbody>
</table>
<!-- End Title Bar -->
<br />
<p>
&nbsp;<br />
</p>
<p class="pull-left"><a href="#">Back to top</a></p>

<!-- Begin Title Bar -->
<table border="0" cellpadding="0" width="100%">
  <tbody>
    <tr>
      <td bgcolor="A0CCFF"><font face="Arial,Helvetica,Sans-serif"><b>&nbsp;<a name="SupportandBugTracking">Support and Bug Tracking</a></b></font></td>
    </tr>
  </tbody>
</table>
<!-- End Title Bar -->
<br />
<p>
<a href="https://github.com/datareel/datareel/issues">https://github.com/datareel/datareel/issues</a>
</p>
<p class="pull-left"><a href="#">Back to top</a></p>

<br />
<hr color="#000000" noshade="noshade" size="1" /><!-- Start Copyright Information -->
<p><font color="000000">Copyright &copy; 2001-2016&nbsp;DataReel OpenSource</font></p>

	
<!-- My Content Ends Above -->
      </div>
    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster
    -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery ||
    document.write('<script src="../js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/ie10-viewport-bug-workaround.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
      Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-83583599-1', 'auto');
      ga('send', 'pageview');
    </script>

  </body>
</html>
